import numpy as np

def calculate_snr_signal_power(signal_power, noise_power):
    """Calculate SNR in dB using signal power and noise power."""
    # Ensure power is not zero to avoid division by zero
    if noise_power == 0:
        return float('inf')  # Infinite SNR if no noise
    return 10 * np.log10(signal_power / noise_power)

def calculate_snr_db_spl(spl_signal, spl_noise):
    """Calculate SNR in dB using SPL values."""
    return spl_signal - spl_noise

# Example signal power values (in the same order as your recorded data)
signal_power_main_audio = [
    0.003014, 0.003245, 0.002473, 0.002103, 0.002739, 0.002846, 0.013827, 0.002681, 0.00282, 0.014283, 0.003067, 0.003068, 0.006603, 0.005114, 0.000164, 0.014849, 0.011364, 0.009661, 0.004681, 0.013467, 0.00106, 0.002678, 0.018371, 0.002814, 0.014472, 0.006829, 0.009901, 0.001883, 0.001576, 0.00686, 0.004542, 0.00603, 0.000379, 0.01985, 0.003804, 0.007951, 0.002686, 0.009727, 0.004609, 0.000394, 0.011136, 0.012599, 0.004862, 0.004064, 0.006333, 0.006475, 0.001086, 0.005746, 0.002954, 0.01696, 0.00399, 0.001147, 0.002286, 0.000292, 0.004228, 0.001519, 0.003761, 0.002629, 0.004054, 0.016689, 0.000325, 0.019159, 0.004631, 0.009874, 0.002656, 0.005056, 0.008603, 0.000992, 0.004602, 0.000596, 0.014553, 0.000303, 0.002365, 0.005739, 0.003944, 0.004846, 0.007138, 0.004042, 0.003457, 0.005835, 0.008774, 0.006699, 0.008062, 0.005915, 0.00368, 0.004399, 0.002637, 0.006607, 0.000279, 0.009172, 0.008574, 0.006948, 0.00033, 0.01161, 0.001841, 0.0098, 0.003051, 0.004842, 0.002646, 0.004874, 0.018511, 0.008316, 0.014665, 0.001103, 0.008607, 0.003426, 0.000134, 0.00623, 0.006757, 0.004255, 0.015625, 0.00705, 0.001598, 0.012337, 0.00575, 0.006628, 0.003711, 0.009453, 0.008568, 0.006165, 0.001024, 0.003612, 0.001836, 0.007144, 0.009652, 0.002322, 0.001516, 0.001885, 0.00695, 0.002138, 0.011259, 0.00345, 0.00726, 0.00715, 0.000503, 0.012694, 0.003247, 0.002853, 0.005577, 0.007622, 0.004224, 0.018131, 0.00499, 0.003958, 0.005051, 0.001869, 0.000403, 0.002995, 0.004432, 0.001333, 0.007663, 0.006424, 0.002558, 0.005321, 0.003526, 0.000409, 0.00573, 0.002537, 0.003859, 0.008796, 0.002664, 0.004278, 0.000513, 0.008305, 0.003074, 0.006777, 0.007348, 0.005034, 0.015242, 0.01095, 0.006525, 0.004856, 0.01906, 0.006831, 0.0026, 0.002701, 0.008612, 0.008655, 0.001704, 0.010146, 0.005616, 4.1e-05, 0.003451, 0.01087, 0.005051, 0.004347, 0.011654, 0.010398, 0.000128, 0.006729, 0.000372, 0.00403, 0.003237, 0.001993, 0.005331, 0.001882, 0.000154, 0.007957, 0.003427, 0.011507, 0.003062, 0.012716, 0.002688, 0.002448, 0.000131, 0.00605, 0.002672, 0.012875, 0.010797, 0.016352, 0.003707, 0.017724, 0.001453, 0.000181, 0.006748, 0.002694, 0.004416, 0.000449, 0.009656, 0.002963, 0.004589, 0.003569, 0.012325, 0.012564, 0.002993, 0.000532, 0.000333, 0.005283, 0.008425, 0.01631, 0.004001, 0.006125, 0.004203, 0.005832, 0.009436, 0.003967, 0.007819, 0.00151, 0.009471, 0.003516, 0.000189, 0.008203, 0.005288, 0.001983, 0.004789, 0.00051, 0.002519, 0.009664, 0.004691, 0.000186, 0.006543, 0.003458, 0.007809, 0.000268, 0.007521, 0.003736, 0.001458, 0.004534, 0.003834, 0.000211, 0.007588, 0.001247, 0.007454, 0.004559, 0.005755, 0.008363, 0.003512, 0.011793, 0.00014, 0.00951, 0.007669, 0.0061, 0.003917, 0.017026, 0.006277, 0.000193, 0.007221, 0.000718, 0.008331, 0.000363, 0.009653, 0.005136, 0.003868, 0.001525, 0.012519, 0.001657, 0.000448, 0.000152, 0.00209, 0.007042, 0.013515, 0.016557, 0.002974, 0.000867, 0.000946, 0.002665, 0.00178, 0.003656, 0.002153, 0.00573
]

signal_power_noise = [
    0.009628, 0.008589, 0.009575, 0.009315, 0.008469, 0.009472, 0.007531, 0.010208, 0.007922, 0.008472, 0.008615, 0.009372, 0.008681, 0.009384, 0.010024, 0.010232, 0.007667, 0.008714, 0.009252, 0.009491, 0.009017, 0.010355, 0.009356, 0.009459, 0.007068, 0.009613, 0.008672, 0.008973, 0.009379, 0.009579, 0.009415, 0.009842, 0.009829, 0.009248, 0.010502, 0.009274, 0.008722, 0.009693, 0.008642, 0.009417, 0.010127, 0.007308, 0.007737, 0.008891, 0.009467, 0.010015, 0.008147, 0.007954, 0.009645, 0.009697, 0.009014, 0.009271, 0.009849, 0.009655, 0.009032, 0.01016, 0.009883, 0.009778, 0.009514, 0.008925, 0.008752, 0.009005, 0.007184, 0.009675, 0.00846, 0.008655, 0.010207, 0.009754, 0.008765, 0.009649, 0.009496, 0.008785, 0.009815, 0.008991, 0.009722, 0.008527, 0.009749, 0.010223, 0.007587, 0.006432, 0.009791, 0.008624, 0.008039, 0.010292, 0.010287, 0.008876, 0.009478, 0.009479, 0.009623, 0.010246, 0.009721, 0.008777, 0.009805, 0.008252, 0.009313, 0.00973, 0.010043, 0.008471, 0.008403, 0.009598, 0.009507, 0.010201, 0.010369, 0.00823, 0.008093, 0.008822, 0.008793, 0.007055, 0.008472, 0.008939, 0.009736, 0.008653, 0.009668, 0.009625, 0.008537, 0.009379, 0.008299, 0.009304, 0.009494, 0.009502, 0.00915, 0.008207, 0.009203, 0.009095, 0.006742, 0.009792, 0.008178, 0.008667, 0.009674, 0.009971, 0.009325, 0.01036, 0.009398, 0.008022, 0.007215, 0.009411, 0.008598, 0.008889, 0.009522, 0.010068, 0.008305, 0.010509, 0.009579, 0.009179, 0.008447, 0.009785, 0.009272, 0.008527, 0.009525, 0.008517, 0.009336, 0.009316, 0.010022, 0.009014, 0.007825, 0.009972, 0.008796, 0.008586, 0.009817, 0.008595, 0.008499, 0.008033, 0.009523, 0.008231, 0.007578, 0.008986, 0.009814, 0.008756, 0.007962, 0.007763, 0.008349, 0.009822, 0.008676, 0.009095, 0.009457, 0.009322, 0.009152, 0.008685, 0.008898, 0.008547, 0.007113, 0.008249, 0.009116, 0.008903, 0.010138, 0.00767, 0.008703, 0.008945, 0.009323, 0.008443, 0.008681, 0.008771, 0.009039, 0.009094, 0.00892, 0.008932, 0.008391, 0.007859, 0.008291, 0.008944, 0.008909, 0.010065, 0.007717, 0.008105, 0.010456, 0.008511, 0.009721, 0.008628, 0.008167, 0.008202, 0.008301, 0.009477, 0.008944, 0.009642, 0.007439, 0.008835, 0.007092, 0.008209, 0.008994, 0.009064, 0.009976, 0.00845, 0.00709, 0.008654, 0.00948, 0.00895, 0.008026, 0.007496, 0.008779, 0.008701, 0.008421, 0.008655, 0.008914, 0.009383, 0.009009, 0.00871, 0.008971, 0.008349, 0.007505, 0.009081, 0.00897, 0.008742, 0.008725, 0.00917, 0.008855, 0.007093, 0.007882, 0.008692, 0.009059, 0.009263, 0.007982, 0.008021, 0.009156, 0.009247, 0.00838, 0.008925, 0.00918, 0.008964, 0.009316, 0.009906, 0.009588, 0.008463, 0.009298, 0.008279, 0.009214, 0.008973, 0.009414, 0.008333, 0.007541, 0.009165, 0.007239, 0.007528, 0.009149, 0.008311, 0.008201, 0.009543, 0.009525, 0.009654, 0.008102, 0.007882, 0.010058, 0.00878, 0.007801, 0.009603, 0.007671, 0.008156, 0.009504, 0.009243, 0.008431, 0.009693, 0.009311, 0.009292, 0.008504, 0.009897, 0.008642, 0.00846, 0.009036, 0.007939, 0.009228, 0.009058
]

# Example dB SPL values (in the same order as your recorded data)
db_spl_main_audio = [
    80.23, 80.0, 79.01, 79.67, 79.49, 80.24, 78.86, 80.09, 80.29, 79.68, 79.92, 79.23, 79.21, 79.81, 79.53, 79.79, 79.89, 79.78, 79.22, 79.22, 79.79, 79.74, 80.02, 78.89, 79.37, 80.09, 80.14, 79.5, 80.54, 79.99, 80.19, 79.14, 79.84, 79.37, 79.02, 79.76, 79.57, 79.69, 79.9, 79.97, 79.3, 79.78, 79.53, 79.85, 79.69, 79.44, 80.38, 79.38, 79.64, 79.81, 81.0, 80.11, 80.05, 80.05, 79.22, 80.44, 79.52, 79.13, 79.19, 79.44, 79.12, 79.94, 79.59, 79.41, 79.96, 80.27, 79.57, 79.3, 79.61, 78.86, 78.94, 80.47, 79.53, 78.78, 79.54, 79.57, 79.9, 79.11, 79.97, 79.49, 79.52, 78.75, 79.42, 79.75, 79.66, 80.14, 78.69, 78.85, 79.87, 79.69, 79.59, 78.76, 80.53, 79.0, 79.33, 80.29, 79.73, 80.02, 80.06, 78.71, 80.76, 79.03, 79.82, 79.77, 78.98, 79.75, 79.75, 79.79, 79.71, 79.99, 79.18, 78.67, 79.95, 79.04, 79.61, 78.79, 80.14, 79.69, 80.05, 78.93, 79.67, 80.01, 79.9, 79.3, 80.48, 79.15, 79.97, 79.69, 80.71, 80.52, 79.53, 80.22, 79.69, 79.29, 79.63, 80.18, 78.67, 79.51, 80.58, 79.68, 79.87, 79.51, 79.58, 79.02, 79.77, 79.75, 80.01, 80.3, 79.03, 79.18, 79.72, 78.94, 78.89, 79.78, 80.03, 79.26, 79.72, 80.65, 80.96, 80.09, 78.99, 79.73, 79.91, 79.69, 79.56, 78.92, 79.57, 80.33, 79.45, 80.59, 80.25, 79.19, 80.22, 79.52, 79.5, 80.16, 80.74, 79.11, 79.44, 80.44, 80.52, 78.78, 79.6, 80.44, 79.56, 79.68, 79.36, 80.71, 79.81, 79.42, 79.22, 79.32, 80.04, 79.64, 80.02, 79.46, 79.11, 79.07, 79.74, 80.25, 80.11, 80.38, 79.94, 79.91, 78.8, 79.32, 80.19, 79.79, 79.76, 80.47, 79.23, 80.08, 79.42, 78.93, 79.98, 79.78, 80.43, 79.37, 78.96, 79.74, 79.54, 79.91, 80.17, 81.12, 79.38, 80.02, 79.43, 80.9, 79.99, 79.84, 80.14, 78.92, 79.64, 79.93, 80.14, 78.75, 79.26, 79.38, 79.7, 78.96, 79.02, 79.47, 79.56, 79.79, 80.61, 79.26, 79.24, 79.1, 80.17, 78.89, 79.58, 79.78, 79.81, 79.66, 80.24, 79.78, 80.15, 79.88, 79.33, 79.87, 79.06, 79.62, 79.72, 80.52, 79.07, 79.87, 78.78, 79.81, 80.61, 79.31, 79.44, 78.81, 79.63, 79.21, 79.19, 79.05, 79.61, 78.9, 79.51, 79.95, 80.09, 79.93, 79.57, 79.65, 79.51, 80.13, 79.88, 79.74, 79.41, 78.96, 80.7, 79.15, 80.32, 79.43, 80.62, 80.19, 79.32, 79.33, 80.18, 78.76
]

db_spl_noise = [
    75.85, 75.61, 74.99, 75.3, 75.85, 75.63, 75.3, 75.47, 74.61, 74.94, 75.0, 76.01, 75.31, 74.68, 75.32, 75.26, 73.76, 74.65, 74.36, 75.74, 74.16, 74.41, 73.96, 75.73, 74.84, 74.45, 74.78, 75.72, 75.31, 75.19, 75.98, 74.12, 73.97, 73.9, 73.85, 75.03, 75.13, 75.64, 74.72, 75.89, 75.52, 74.87, 75.41, 75.63, 74.42, 75.25, 75.87, 74.13, 75.26, 74.97, 76.31, 73.88, 74.87, 73.6, 75.59, 73.84, 74.32, 75.46, 74.46, 75.3, 73.96, 74.06, 74.55, 74.65, 75.62, 75.04, 75.23, 75.98, 74.13, 73.46, 76.15, 75.61, 75.01, 75.53, 74.98, 75.2, 75.06, 75.28, 75.56, 75.63, 74.19, 74.73, 75.95, 74.76, 74.07, 74.09, 74.57, 74.37, 76.23, 75.78, 74.77, 74.81, 75.63, 74.0, 73.96, 74.18, 75.48, 74.48, 75.95, 75.56, 75.39, 76.03, 74.57, 73.02, 75.72, 76.19, 74.62, 75.54, 74.59, 75.42, 75.66, 74.43, 75.07, 75.63, 74.88, 75.13, 74.51, 76.91, 73.7, 74.19, 74.18, 75.37, 74.83, 74.9, 75.03, 75.72, 74.56, 76.09, 75.59, 75.48, 75.95, 73.96, 74.91, 75.15, 75.43, 76.24, 74.75, 74.45, 75.03, 76.13, 74.53, 74.03, 75.83, 74.67, 75.89, 74.29, 74.2, 75.54, 74.16, 75.51, 75.45, 75.83, 76.03, 74.18, 75.95, 75.47, 74.98, 75.7, 75.27, 75.15, 74.78, 74.64, 76.58, 74.51, 74.69, 74.62, 76.01, 74.48, 74.23, 74.25, 74.36, 74.62, 75.44, 75.2, 75.27, 75.21, 74.7, 75.49, 76.04, 75.42, 75.24, 75.45, 75.19, 74.12, 74.62, 74.84, 75.34, 75.51, 75.06, 75.37, 75.72, 73.08, 74.45, 75.56, 75.7, 74.35, 75.02, 74.92, 75.75, 74.64, 75.59, 75.95, 75.55, 76.26, 75.39, 74.92, 74.56, 76.73, 75.27, 75.25, 74.32, 75.87, 73.56, 75.08, 74.34, 76.02, 74.65, 74.31, 74.15, 75.93, 74.27, 75.12, 74.86, 75.78, 75.44, 75.85, 75.6, 76.28, 74.38, 74.19, 74.56, 74.28, 75.58, 75.03, 75.58, 74.75, 75.78, 75.2, 74.77, 76.66, 74.89, 75.22, 75.19, 76.35, 75.64, 73.8, 75.32, 76.11, 74.61, 74.09, 75.76, 74.93, 74.51, 74.61, 75.81, 75.42, 75.67, 74.8, 76.29, 73.67, 74.44, 73.85, 75.48, 74.81, 75.67, 75.45, 76.12, 75.12, 75.02, 76.59, 75.06, 74.9, 75.74, 75.61, 75.24, 73.99, 75.77, 77.05, 74.43, 74.77, 73.72, 75.37, 73.45, 76.56, 74.63, 74.94, 74.21, 75.98, 74.33, 73.97, 74.09, 74.99, 74.96, 75.37, 75.08, 75.41, 75.18, 74.97, 75.42, 75.52
]

# Calculate SNR from signal power values
snr_signal_power_values = []
for i in range(len(signal_power_main_audio)):
    snr_signal_power = calculate_snr_signal_power(signal_power_main_audio[i], signal_power_noise[i])
    snr_signal_power_values.append(snr_signal_power)
    print(f"SNR from Signal Power {i+1}: {snr_signal_power:.2f} dB")

# Calculate SNR from dB SPL values
snr_db_spl_values = []
for i in range(len(db_spl_main_audio)):
    snr_db_spl = calculate_snr_db_spl(db_spl_main_audio[i], db_spl_noise[i])
    snr_db_spl_values.append(snr_db_spl)
    print(f"SNR from dB SPL {i+1}: {snr_db_spl:.2f} dB")


# Calculate the average SNR from signal power values
average_snr_signal_power = np.mean(snr_signal_power_values)
print(f"\nAverage SNR from Signal Power: {average_snr_signal_power:.2f} dB")

# Calculate the average SNR from dB SPL values
average_snr_db_spl = np.mean(snr_db_spl_values)
print(f"Average SNR from dB SPL: {average_snr_db_spl:.2f} dB")